(this.webpackJsonptransport_optimum_client=this.webpackJsonptransport_optimum_client||[]).push([[0],{174:function(t,e,a){},175:function(t,e,a){"use strict";a.r(e);var n,r=a(8),c=a(0),i=a(28),s=a.n(i),o=a(48),u=a.n(o),d=a(77),l=a(36),p=a(187),j=a(190),b=a(188),m=a(191),h=a(78),f=a.n(h),g=function(t,e){return Object(d.a)(u.a.mark((function a(){var n,r;return u.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,f()({method:"post",url:"https://cors-anywhere.herokuapp.com/https://maps.googleapis.com/maps/api/directions/json",params:{origin:t,destination:e,key:"AIzaSyDaWwpxVbqdPSR6qenMJoc4C0Qh_w6g__s"}});case 3:if("OK"!==(r=a.sent).data.status){a.next=8;break}n=r.data.routes[0],a.next=9;break;case 8:throw new Error("Something went wrong. Try again with another location.");case 9:a.next=14;break;case 11:a.prev=11,a.t0=a.catch(0),n=a.t0.message;case 14:return a.prev=14,a.abrupt("return",n);case 17:case"end":return a.stop()}}),a,null,[[0,11,14,17]])})))()},x=function(t){return Object(d.a)(u.a.mark((function e(){var a,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f()({method:"post",url:"/prices",params:{distance:t}});case 3:n=e.sent,a=n.data.price,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),a=e.t0.message;case 10:return e.prev=10,e.abrupt("return",a);case 13:case"end":return e.stop()}}),e,null,[[0,7,10,13]])})))()},O=a(76),v=function(t){var e=t.from,a=t.to,n=Object(c.useState)(),i=Object(l.a)(n,2),s=i[0],o=i[1],u=Object(c.useState)({}),d=Object(l.a)(u,2),j=d[0],b=d[1],m=function(t){var e={lat:t.coords.latitude,lng:t.coords.longitude};b(e)};Object(c.useEffect)((function(){navigator.geolocation.getCurrentPosition(m)}));return Object(r.jsx)(p.a,{children:Object(r.jsx)("div",{className:"map-container","data-cy":"map-container",children:Object(r.jsx)(O.d,{googleMapsApiKey:"AIzaSyDaWwpxVbqdPSR6qenMJoc4C0Qh_w6g__s",children:Object(r.jsxs)(O.c,{"data-cy":"map",mapContainerStyle:{height:"80vh",width:"100%"},zoom:10,center:j,children:[j.lat?Object(r.jsx)(O.e,{position:j,onDragEnd:function(t){return function(t){var e=t.latLng.lat(),a=t.latLng.lng();b({lat:e,lng:a})}(t)},draggable:!0}):null,s&&Object(r.jsx)(O.a,{"data-cy":"map-renderer",options:{directions:s}}),e&&a&&Object(r.jsx)(O.b,{options:{destination:e,origin:a,travelMode:"DRIVING"},callback:function(t){null!==t&&o(t)}})]})})})})},y=a(193),w=function(t){var e=t.price;return Object(r.jsxs)(y.a,{className:"total-price","data-cy":"total-price",children:["Our price estimate for this routes is SEK: ",e]})},S=function(){var t=Object(c.useState)(),e=Object(l.a)(t,2),a=e[0],n=e[1],i=Object(c.useState)(),s=Object(l.a)(i,2),o=s[0],h=s[1],f=Object(c.useState)(),O=Object(l.a)(f,2),S=O[0],k=O[1],_=Object(c.useState)(),N=Object(l.a)(_,2),D=N[0],I=N[1],P=Object(c.useState)(),q=Object(l.a)(P,2),C=q[0],T=q[1],F=function(){var t=Object(d.a)(u.a.mark((function t(e){var a,r,c;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.preventDefault(),k(e.target.origin.value),I(e.target.destination.value),a=e.target.origin.value,r=e.target.destination.value,t.next=7,g(a,r);case 7:if("object"!==typeof(c=t.sent)){t.next=18;break}return t.t0=T,t.next=12,x(c.legs[0].distance.value);case 12:t.t1=t.sent,(0,t.t0)(t.t1),n(c.legs[0]),h(!1),t.next=21;break;case 18:h(c),n(!1),T(!1);case 21:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(r.jsxs)(p.a,{className:"box","data-cy":"box",children:[a&&Object(r.jsx)(j.a,{"data-cy":"route-information-box",children:Object(r.jsxs)(j.a.Header,{className:"route","data-cy":"successful-request",children:["Your route:",Object(r.jsxs)("div",{className:"origin","data-cy":"origin",children:["Starting point - ",a.start_address]}),Object(r.jsxs)("div",{className:"destination","data-cy":"destination",children:["Destination - ",a.end_address]}),Object(r.jsxs)("div",{className:"route-distance","data-cy":"route-distance",children:["Distance: ",a.distance.text]}),Object(r.jsxs)("div",{className:"route-time","data-cy":"route-time",children:["Duration: ",a.duration.text]})]})}),o&&Object(r.jsx)(y.a,{id:"failure-box","data-cy":"failure-message",children:Object(r.jsx)(j.a.Header,{id:"fail-message","data-cy":"fail-message",children:o})}),Object(r.jsxs)(b.a,{"data-cy":"route-form",onSubmit:function(t){return F(t)},children:[Object(r.jsx)(b.a.Input,{icon:"shipping fast",iconPosition:"left",label:"From:",placeholder:"Type in your location",name:"origin",type:"input",id:"from","data-cy":"from",required:!0}),Object(r.jsx)(b.a.Input,{icon:"warehouse",iconPosition:"left",label:"To:",placeholder:"Type in your location",name:"destination",type:"input",id:"to","data-cy":"to",required:!0}),Object(r.jsx)(m.a,{"data-cy":"submit-route",id:"submit-route",content:"Submit Your Route",color:"green"})]}),C&&Object(r.jsx)(w,{price:C}),Object(r.jsx)(v,{from:S,to:D})]})},k=a(194),_=a(189),N=function(){return Object(r.jsx)("div",{children:Object(r.jsx)(k.a,{className:"navigation-bar","data-cy":"navigation-bar",children:Object(r.jsx)(_.a,{id:"menu",children:Object(r.jsx)(_.a.Item,{"data-cy":"transport-optimum",name:"transport-optimum",icon:"shipping fast",iconPosition:"left",children:"Transport Optimum"})})})})},D=function(){return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(N,{}),Object(r.jsx)(S,{})]})},I=(a(173),function(t){t&&t instanceof Function&&a.e(3).then(a.bind(null,195)).then((function(e){var a=e.getCLS,n=e.getFID,r=e.getFCP,c=e.getLCP,i=e.getTTFB;a(t),n(t),r(t),c(t),i(t)}))});a(174);n="https://transport-optimum.herokuapp.com/api/v1",f.a.defaults.baseURL=n,s.a.render(Object(r.jsx)(D,{}),document.getElementById("root")),I()}},[[175,1,2]]]);
//# sourceMappingURL=main.07758c00.chunk.js.map